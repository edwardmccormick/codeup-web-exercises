<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Defuse the BOM</title>
</head>
<body>

<h2 id="message">This BOM will self destruct in <span id="timer">5</span> seconds...</h2>
<button id="defuser">Defuse the BOM</button> <button id="timeAdd">Just give me five more seconds</button>

<script>
// (function() {
    "use strict";

    var detonationTimer = 5;

    // TODO: This function needs to be called once every second
    function updateTimer() {
        if (detonationTimer == 0) {
            alert('EXTERMINATE!');
            document.getElementById('message').innerHTML = "<h2>You've killed us!</h2>"
            document.body.innerHTML = "<h1>BOOM!!!!</h1><br><br> <img src='https://www.ready.gov/sites/default/files/2019-09/hero_nuclear_blast.jpg' alt='nuclear blast' style='max-width: 100%'><h2>You've killed us!</h2>";
        } else if (detonationTimer > 0) {
            document.getElementById('timer').innerHTML = detonationTimer;
        }

        detonationTimer--;
    }

var myVar = setInterval(updateTimer,1000)

// myVar

    // TODO: When this function runs, it needs to
    // cancel the interval/timeout for updateTimer()
    function defuseTheBOM() {
    clearInterval(myVar);
    // clearInterval(setInterval(updateTimer,1000)) this doesn't work - why?
    }

    // Don't modify anything below this line!
    //
    // This causes the defuseTheBOM() function to be called
    // when the "defuser" button is clicked.
    // We will learn about events in the DOM lessons
    var defuser = document.getElementById('defuser');
    // defuser.addEventListener('click', defuseTheBOM);
    // defuser.addEventListener('click', alert("Whooo, we're safe"));

    defuser.addEventListener('click', iWantToDoItAll);

    var timeAdd = document.getElementById('timeAdd')

    timeAdd.addEventListener("click", fiveMoreSeconds);

    function fiveMoreSeconds() {
        detonationTimer += 5
    }

    var ii = 0

var title

    function iWantToDoItAll() {
        defuseTheBOM();
        if (ii<1) {alert("Whooooooooo, thank goodness, we're safe now.")} else {alert("You did awesome, skipper, keep patting yourself on the back")}
        // document.body.innerHTML = "<h1>HOORAY YOU'VE SAVED US</h1><br><br><h2>Man that was close</h2>";
        // document.getElementById('message').innerHTML = "<h2>I think we're safe!</h2>";
        document.getElementById('defuser').innerHTML = "Here's a button for you, hero";
        document.getElementsByTagName("title").outerHTML = "We survived!";
        ii++;
    }
// })();
</script>
</body>
</html>
